{% extends 'albums/base.html' %}

{% block title %}Your Profile{% endblock %}

{% block content %}
<div class="profile">
    <div class="profile-section">
        <div class="stats-section">
            <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats">
                <div>üìñ –ê–ª—å–±–æ–º–æ–≤: {{ user_stats.total_albums }}</div>
                {% if user_stats.is_premium %}
                    <div>üíé –ü—Ä–µ–º–∏—É–º –¥–æ {{ user.premium_until|date:"d.m.Y" }}</div>
                {% else %}
                    <div>üí∞ –°—Ç–∞–Ω—å—Ç–µ –ø—Ä–µ–º–∏—É–º!</div>
                {% endif %}
            </div>
        </div>
        <h2>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h2>

        <!-- –í–°–Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º —Ç—É—Ç -->
        <div id="account-details-block"
             hx-get="{% url 'albums:account_details' %}"
             hx-trigger="load"
             hx-swap="innerHTML">
        </div>

        <a href="{% url 'albums:logout' %}" class="link">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</a>
    </div>

    <div class="content-add">
        <div class="section-header">
            <h2>–í–∞—à–∏ –∞–ª—å–±–æ–º—ã:</h2>
            <button class="btn-primary"
                    hx-get="{% url 'albums:create_album_form' %}"
                    hx-target="#create-album-modal"
                    hx-swap="innerHTML">
                ‚ûï –ù–æ–≤—ã–π –∞–ª—å–±–æ–º
            </button>
        </div>

        <div id="create-album-modal" class="modal"></div>

        <div class="albums-list">
            {% for album in albums %}
                <div class="album-item">
                    <a href="{% url 'albums:album_detail' album.id %}">
                        üìñ {{ album.title }}
                        <small>({{ album.photos.count }} —Ñ–æ—Ç–æ)</small>
                    </a>
                </div>
            {% empty %}
                <p>–ê–ª—å–±–æ–º–æ–≤ –Ω–µ—Ç. –°–æ–∑–¥–∞–π –ø–µ—Ä–≤—ã–π! üòä</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
